<div class="content section-padding bg-white box-shadow section-bottom-spacing">

  <div class="section-heading section-head-with-button">
    <div class="section-title">
      <p>Customer List</p>
    </div>
  </div>
  <div *ngIf="UserListing" class="tabular-data-wrapper registered-user-table">
    <p-table [value]="UserListing" [responsive]="true" styleClass="faq-table" [alwaysShowPaginator]="false" #dt
      [columns]="cols" selectionMode="multiple" [(selection)]="selectedCars">


      <ng-template pTemplate="caption">
        <div class="row">
          <div class="col-md-2 pl-0 text-left" style="text-align: right">
            <input type="text" pInputText size="50" placeholder="Search by Name" [(ngModel)]="searchValue"
              class="form-control mb-2">
          </div>
          <div class="col-md-2 text-left">
            <p-dropdown [options]="sortByArray" optionLabel="name" [(ngModel)]="selectedSortValue" placeholder='Sort By'
              [style]="{width: '100%', minWidth: '100%'}"></p-dropdown>

          </div>
          <div class="dropdown col-md-3 text-left location">
            <tag-input class="width-120" [(ngModel)]="selectedCountryList" placeholder="Search Location"
              secondaryPlaceholder="Search Location" (onTextChange)="handleChange($event)" theme='bootstrap'>
              <tag-input-dropdown class="width-100" [autocompleteItems]="countryList">
              </tag-input-dropdown>

            </tag-input>

          </div>
          <div class="col-md-3">
            <button class="btn btn-primary btn-raised" (click)="searchData()">Search</button>
            &nbsp;&nbsp;
            <button class="btn btn-danger btn-raised" type="button" (click)="resetData()">Reset</button>
          </div>
          <div class="col-md-2 pr-0">
            <button type="button" pButton icon="fa fa-file-o" iconPos="left" label="Export CSV"
            style="background-color: #8e71b5; width: 100%;float:right;" (click)="exportData()" style="float:right">
            </button>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th style="width: 70px !important;">Sr.No.</th>
          <th style="width: 155px !important;">Name</th>
          <th style="width: 200px !important;">Email</th>
          <th style="width: 117px !important;">PhoneNo</th>
          <th>Address</th>
          <th>Status</th>
          <th style="width:80px !important;">Action</th>
          <th style="width: 89px !important;">View</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-key let-i="rowIndex">
        <tr [pSelectableRow]="rowData">
          <td>{{ i + 1 }}</td>
          <td style="word-break: break-all;"><span class="ui-column-title">Name</span>{{item?.name | titlecase}}</td>
          <td style="word-break: break-all;"><span class="ui-column-title">email</span>{{item?.email ? item?.email :
            'N/A'}}</td>
          <td style="word-break: break-all;"><span class="ui-column-title">phoneNo</span>{{item?.phoneNo ? item?.phoneNo
            : 'N/A'}}</td>

          <td style="word-break: break-all;"><span class="ui-column-title">Address</span>{{item?.address ? item?.address
            : 'N/A'}}</td>
          <td><span class="ui-column-title">Status</span>
            <!-- <p-dropdown [options]="statusArray" value="{{item.user_status}}" optionLabel="name" optionValue="value"
            (onChange)="selectStatusValue($event, item)" placeholder='Status'></p-dropdown> -->
            <div class="dropdown col-md-12">
              <button class="btn dropdown dropdown-toggle wid-100 drop-button" type="button" data-toggle="dropdown"
                [ngClass]="{'active-color': item?.accountStatus == 'active', 'flagged-color': item?.accountStatus == 'flagged', 'inactive-color': item?.accountStatus == 'inactive'}">
                {{item?.accountStatus | titlecase}}
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu menu-width">
                <li style="display: flex;" *ngFor="let status of statusArray"
                  (click)="changeStatus(status, item.id, i)">
                  <a class="dropdown-item" [ngClass]="{'active': item?.accountStatus == status.value}"
                    href="javaScript:void(0)">
                    {{status.name}}
                  </a>
                </li>
              </ul>
            </div>
          </td>
          <td style="width:100px" class="action-buttons"><button class="action-delete" (click)="DeleteAction(item.id)">delete</button></td>
          <td class="action-buttons">
            <span class="ui-column-title">Action</span>
            <button [routerLink]="['/user-detail', item.id]"
              class="custom-btn custom-btn-small blue-btn text-center edit" style="margin-right: 4px !important;
                  min-width: 3em !important;
                  height: 2.4em !important; color:#ce0017">
              <i class="fa fa-eye" aria-hidden="true"></i>
            </button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td class="text-center text-danger" colspan="7">No Record Found.</td>
        </tr>
      </ng-template>
    </p-table>
    <p-paginator [rows]="10" [totalRecords]="totalRecords" (onPageChange)="paginate($event)"></p-paginator>
  </div>
</div>

<p-dialog [draggable]="false" [header]="itemToEdit? 'Customer Details':'Add New Role'" modal="true"
  [(visible)]="displayAddEditAbout" [responsive]="true" [style]="{minWidth: '800px'}" appendTo="body" maximizable="true"
  blockScroll="true" [closeOnEscape]="false" (onHide)="closeAddEditCompany()">
  <div class="dialog-content">
    <form class="custom-form" [formGroup]="addEditCompanyForm">
      <div class="custom-form-control" style="text-align: center;border-radius: 100%;margin-bottom: 0px;">
        <!-- <input readonly #myInput name="company_logo-upload" type="file" (change)="uploadImage($event, 'company_logo')"> -->
        <img [src]="addEditCompanyForm.value.profilePic || 'assets/project-images/City-bg.png'" height="200" width="200"
          style="
              border-radius: 100%;
          " />
      </div>
      <div class="custom-form-control">
        <span class="key">Name</span>
        <span class="value">
          <input readonly type="text" readonly name="name" id="name" formControlName="name">
        </span>
        <span class="key">Email</span>
        <span class="value">
          <input readonly type="text" name="email" id="email" formControlName="email" readonly>
        </span>
        <span class="key">PhoneNo</span>
        <span class="value">
          <input readonly type="text" name="phoneNo" id="phoneNo" formControlName="phoneNo" readonly>
        </span>
        <span class="key">Login Type</span>
        <span class="value">
          <input readonly type="text" name="loginType" id="loginType" formControlName="loginType" readonly>
        </span>
        <span class="key">City</span>
        <span class="value">
          <input readonly type="text" name="city" id="city" formControlName="city" readonly>
        </span>
        <span class="key">State</span>
        <span class="value">
          <input readonly type="text" name="state" id="state" formControlName="state" readonly>
        </span>
        <span class="key">Address</span>
        <span class="value">
          <textarea _ngcontent-wmm-c14="" class="form-control" name="address" id="address" formControlName="address"
            placeholder="Enter address!" rows="3" readonly></textarea>
        </span>
        <span class="key">Short Info</span>
        <span class="value">
          <textarea _ngcontent-wmm-c14="" readonly class="form-control" name="shortInfo" id="shortInfo"
            formControlName="shortInfo" placeholder="Enter shortInfo!" rows="3"></textarea>
        </span>
      </div>
      <div class="custom-form-contEmailrol decision-box">
        <!-- <button type="reset" title="Cancel" class="custom-btn red-btn text-center button-with-icon cancel"
          (click)="closeAddEditCompany()"><i class="fa fa-times icon" aria-hidden="true"></i>Cancel</button> -->
      </div>
    </form>
  </div>
</p-dialog>