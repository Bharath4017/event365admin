<div class="content section-padding bg-white box-shadow section-bottom-spacing">

  <div class="section-heading section-head-with-button">
    <div class="section-title">
      <p>Category List</p>
    </div>

    <div class="header-action-button">
      <button (click)="openAddEditCompany()" class="custom-btn theme-btn text-center block-center button-with-icon"><i
          class="fa fa-plus icon" aria-hidden="true"></i>Add New</button>

    </div>
  </div>
  <div *ngIf="CompanyListing" class="tabular-data-wrapper">

    <p-table #dt [columns]="cols" [value]="CompanyListing" [responsive]="true" styleClass="faq-table faq-table-cat"
       [alwaysShowPaginator]="false">
      <ng-template pTemplate="caption">
        <div style="text-align: right">
          <!-- <i class="fa fa-search" style="margin:4px 4px 0 0"></i> -->
          <input type="text" pInputText size="50" placeholder=" Category Search..."
            (input)="dt.filterGlobal($event.target.value, 'contains')" class="form-control mb-2" style="width: auto;">
        </div>
      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 8%;">Sr.No.</th>
          <th>Category</th>

          <th style="text-align: center; width: 14%;">SubCategory</th>
          <th style=" text-align: center; width: 14%;">Status</th>
          <th>Action</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item let-key let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td><span *ngFor="let col of columns" [ngSwitch]="col.field" class="ui-column-title">
              <input [ngSwitch]="col.field" *ngSwitchCase="categoryName" pInputText type="text"
                (input)="dt.filter($event.target.value, col.field, 'contains')">
              Company</span>{{item.categoryName}}</td>

          <td class="action-buttons">
            <span class="ui-column-title">SubCategory</span>
            <button [routerLink]="['../subCategory', item.id]" style="min-width: 3em;color: #FF8D60 !important;
          " class="custom-btn custom-btn-small blue-btn text-center edit"><i class="fa fa-th-large"
                aria-hidden="true"></i></button>
          </td>

          <td><span class="ui-column-title">Status Change</span>
            <div class="d-flex align-items-center justify-content-center">
              <app-active-swtich [checked]="item.isActive" (change)="statusChange($event, item.id)" class="ml-1">
              </app-active-swtich>
            </div>
          </td>
          <td class="action-buttons">
            <span class="ui-column-title">Action</span>
            <button (click)="openAddEditCompany(item)" class="custom-btn custom-btn-small blue-btn text-center edit"
              style="margin-right: 4px !important;
              min-width: 3em !important;
              height: 2.4em !important;"><i class="fa fa-pencil" aria-hidden="true"></i></button>
            <button class="custom-btn custom-btn-small red-btn text-center" (click)="deleteCompany(item)" style="margin-right: 4px !important;
            min-width: 3em !important;
            height: 2.4em !important;"><i class="fa fa-trash-o" aria-hidden="true"></i></button>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td class="text-center text-danger" colspan="5">No Record Found.</td>
        </tr>
      </ng-template>
    </p-table>
    <p-paginator [rows]="10" [totalRecords]="totalRecords" (onPageChange)="paginate($event)"></p-paginator>

  </div>
</div>

<p-dialog [draggable]="false" [header]="itemToEdit? 'Edit Category':'Add New Category'" modal="true"
  [(visible)]="displayAddEditAbout" [responsive]="true" [style]="{minWidth: '800px'}" appendTo="body" maximizable="true"
  blockScroll="true" [closeOnEscape]="false" (onHide)="closeAddEditCompany()">
  <div class="dialog-content">

    <form class="custom-form" [formGroup]="addEditCompanyForm" (ngSubmit)="addUpdateCompany()">
      <div class="custom-form-control">
        <span class="key">Category</span>
        <span class="value">
          <input type="text" name="categoryName" id="categoryName" formControlName="categoryName">
        </span>
        <span class="error-message"

        
          *ngIf="addEditCompanyForm.controls.categoryName.invalid && (addEditCompanyForm.controls.categoryName.dirty || addEditCompanyForm.controls.categoryName.touched) && isAddFaqSubmitted">
          <span
            *ngIf="addEditCompanyForm.controls.categoryName.errors.required || addEditCompanyForm.controls.categoryName.errors.whitespace">Company
            is required.</span>
        </span>
      </div>


      <div class="custom-form-control decision-box">
        <button type="reset" title="Cancel" class="custom-btn red-btn text-center button-with-icon cancel"
          (click)="closeAddEditCompany()"><i class="fa fa-times icon" aria-hidden="true"></i>Cancel</button>
        <button type="submit" title="Submit" class="custom-btn green-btn text-center button-with-icon submit"><i
            class="fa fa-check icon" aria-hidden="true"></i>Submit</button>
      </div>
    </form>
  </div>
</p-dialog>